\usepackage{parskip}

\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsthm}

\usepackage{enumitem}

\usepackage[dvipsnames]{xcolor}
\colorlet{exercise}{red!80!black}
\colorlet{solved}{green!30!black}
\colorlet{self_proof}{blue!30!black}

\usepackage{mathrsfs} % for \mathscr

\usepackage{hyperref}
\usepackage{cleveref}

\providecommand{\dd}{\,\mathrm{d}}

\usepackage{mathtools} % also contains \coloneqq
\DeclarePairedDelimiter{\oldparen}{(}{)}
\DeclarePairedDelimiter{\oldbrk}{[}{]}
\DeclarePairedDelimiter{\oldset}{\{}{\}}
\DeclarePairedDelimiter{\oldabs}{\lvert}{\rvert}
\DeclarePairedDelimiter{\oldnorm}{\lVert}{\rVert}
\DeclarePairedDelimiter{\oldfloor}{\lfloor}{\rfloor}
\DeclarePairedDelimiter{\oldceil}{\lceil}{\rceil}

\makeatletter
\def\paren{\@ifstar{\oldparen}{\oldparen*}}
\def\brk{\@ifstar{\oldbrk}{\oldbrk*}}
\def\set{\@ifstar{\oldset}{\oldset*}}
\def\abs{\@ifstar{\oldabs}{\oldabs*}}
\def\norm{\@ifstar{\oldnorm}{\oldnorm*}}
\def\floor{\@ifstar{\oldfloor}{\oldfloor*}}
\def\ceil{\@ifstar{\oldceil}{\oldceil*}}

\g@addto@macro\normalsize{%
  \setlength\abovedisplayskip{7pt}%
  \setlength\belowdisplayskip{7pt}%
  \setlength\abovedisplayshortskip{1pt}%
  \setlength\belowdisplayshortskip{1pt}%
}
\makeatother

\newcommand\N{\ensuremath{\mathbb{N}}}
\newcommand\R{\ensuremath{\mathbb{R}}}
\newcommand\Z{\ensuremath{\mathbb{Z}}}
\renewcommand\O{\ensuremath{\varnothing}}
\renewcommand\P{\ensuremath{\mathbb{P}}}
\newcommand\Q{\ensuremath{\mathbb{Q}}}
\newcommand\C{\ensuremath{\mathbb{C}}}

% make implied by and implies arrows shorter
% \let\implies\Rightarrow
% \let\impliedby\Leftarrow
% \let\iff\Leftrightarrow

% make \epsilon and \varepsilon the same
\let\epsilon\varepsilon

% <theorems>
% \theoremstyle{plain}
% \newtheorem{theorem}{Theorem}[section]
% \newtheorem*{theorem*}{Theorem}
% \newtheorem{proposition}[theorem]{Proposition}
% \newtheorem{lemma}[theorem]{Lemma}
% \newtheorem{corollary}[theorem]{Corollary}
% \newtheorem{axiom}{Axiom}[section]
% \newtheorem*{exer}{Exercise}
% 
% \theoremstyle{definition}
% \newtheorem{definition}[theorem]{Definition}
% 
% \theoremstyle{remark}
% \newtheorem*{remark}{Remark} 
% \newtheorem*{example}{Example}
% </theorems>

% Gilles Castel's theorems
\usepackage[framemethod=Tikz]{mdframed}
\mdfsetup{skipabove=1em,skipbelow=0em}
\mdfdefinestyle{axiomstyle}{
    outerlinewidth = 1.5,
    roundcorner = 10,
    leftmargin = 15,
    rightmargin = 15,
    backgroundcolor = blue!10
}
\mdfdefinestyle{defstyle}{
    outerlinewidth = 1.5,
    % roundcorner = 10,
    leftmargin = 7,
    rightmargin = 7,
    backgroundcolor = green!10
}
\mdfdefinestyle{thmstyle}{
    outerlinewidth = 1.5,
    roundcorner = 10,
    leftmargin = 7,
    rightmargin = 7,
    backgroundcolor = yellow!10
}
\mdfdefinestyle{lemmastyle}{
    outerlinewidth = 1.5,
    roundcorner = 10,
    leftmargin = 7,
    rightmargin = 7,
    backgroundcolor = yellow!10
}
\theoremstyle{definition}
\newmdtheoremenv[nobreak=true, style=axiomstyle]{axiom}{Axiom}[section]
\newmdtheoremenv[nobreak=true, style=thmstyle]{theorem}{Theorem}[section]
\newmdtheoremenv[nobreak=true]{proposition}[theorem]{Proposition}
\newmdtheoremenv[nobreak=true]{lemma}[theorem]{Lemma}
\newmdtheoremenv[nobreak=true]{corollary}[theorem]{Corollary}
\newmdtheoremenv[nobreak=true, style=defstyle]{definition}[theorem]{Definition}

\newmdtheoremenv[nobreak=true]{problem}{Problem}[section]

\theoremstyle{remark}
\newtheorem*{remark}{Remarks}
\newtheorem*{example}{Example}
\newtheorem*{solution}{Solution}
\newtheorem*{notation}{Notation}

% <cref>
\crefname{theorem}{theorem}{theorems}
\crefname{proposition}{proposition}{propositions}
\crefname{lemma}{lemma}{lemmas}
\crefname{corollary}{corollary}{corollaries}
\crefname{axiom}{axiom}{axioms}
\crefname{definition}{definition}{definitions}
\crefname{problem}{problem}{problems}
% </cref>

% <hyperlinks>
\hypersetup{colorlinks,
    linkcolor={red!50!black},
    citecolor={blue!50!black},
    urlcolor={blue!80!black}}
% </hyperlinks>

\usepackage{xifthen}
\def\testdateparts#1{\dateparts#1\relax}
\def\dateparts#1 #2 #3 #4 #5\relax{
    \marginpar{\small\textsf{\mbox{#1 #2 #3 #5}}}
}

\makeatletter
\def\@lecture{}%
\newcommand*{\lecture}[3]{
    \ifthenelse{\isempty{#3}}{%
        \def\@lecture{Lecture #1}%
    }{%
        \def\@lecture{Lecture #1: #3}%
    }%
    \subsection*{\@lecture}
    \marginpar{\raggedright\small\textsf{#2}}%
    \vskip 6pt
}
\newcommand*{\refifdef}[3]{%label,command,fallback
    \@ifundefined{r@#1}{#3}{#2{#1}}%
}
\makeatother

\newlist{examplelist}{enumerate}{1}
\setlist[examplelist]{label*=(\roman*)~,ref=(\roman*)}
\makeatletter
\newcommand\myitem[1][]{%
  \if\relax\detokenize{#1}\relax
    \item\relax
  \else
    \protected@edef\@currentlabel{#1}%
    \item[(#1)~]
  \fi}
\makeatother

% change label for enumerate
\setlist[enumerate]{label*=(\roman*)~,ref=(\roman*)}

% fix spacing for \forall and \exists
\let\oldforall\forall
\renewcommand{\forall}{\oldforall \, }
\let\oldexist\exists
\renewcommand{\exists}{\oldexist \: }
\newcommand\existu{\oldexist! \: }

% probability

